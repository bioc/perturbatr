---
title: "Knockout cookbook"
author: "Simon Dirmeier"
date: "`r Sys.Date()`"
output: rmarkdown::pdf_document
vignette: >
  %\VignetteIndexEntry{Knockout cookbook}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
  knitr::opts_chunk$set(echo = TRUE)
  library(data.table)
  library(dplyr)
  library(methods)
  library(knockout)
  data("rnai_screen_raw")
  my.data <- rnai.screen.raw@.data %>% 
    dplyr::filter(Virus=="HCV") %>%
    dplyr::select(Replicate, Plate, RowIdx, ColIdx, 
                  GeneSymbol, Readout, Control, siRNAIDs) %>% 
    .[1:5]
```

# Introduction

`knockout` does analysis of large-scale gene knockout/knockdown screens.
 For this several preprocessing and data normalization techniques such as *median-polish* or *quantile-quantile normalization* are implemented.
 On the normalized data-set essential hits can be prioritized using state-of-the-art analysis tools, such as *gespeR* or *pmm*. 
 The resulting hit lists can be further extended using network diffusion algorithms, such as *Markov random walks with restarts* or the well-known *heat equation*.
 Eventually hits can be analyses using *GSEA*, etc.

# Tutorial

This tutorial walks you to the basic functionality of `knockout` with hand-on examples

## Creating a raw data-set

You supposedly start with something like a `data.frame`. In order to create a `knockout-data`-set you need to transfrom it into a `data.table` with at least the following columns:

```{r, include=TRUE}
  print(my.data)
```

You can then use your data-set `my.data` and cast it to a `knockout.data` object:

```{r, include=TRUE}
  my.knockout.data <- methods::as(my.data, "knockout.data")
```

Coercing your `data.table` to `knockout.data` will automatically warn you if your table is formatted wrongly.

## Preprocessing

Raw image-based screens have usually to be normalized in order to ensure comparability between plates. Normalization can be done using the `preprocess` method. We use a provided raw dataset for that.

```{r}
  data("rnai_screen_raw")
  rnai.screen.raw
```

## Data-analysis

